<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Escritor | Publiery</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/dashboard-escritor-mejorado.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-content">
        <div class="header-left">
          <h1>Dashboard Escritor</h1>
          <p id="escritorNombre">Cargando...</p>
        </div>
        <div class="header-right">
          <div class="notifications-badge" id="notificationsBadge">
            <span id="notificationsCount">0</span>
          </div>
          <button id="logoutBtn" class="btn btn-secondary">Cerrar SesiÃ³n</button>
        </div>
      </div>
    </header>
    <!-- Navigation -->
    <nav class="dashboard-nav">
      <ul>
        <li class="active" data-tab="inicio">ğŸ  Inicio</li>
        <li data-tab="analytics">ğŸ“Š Analytics</li>
        <li data-tab="libros">ğŸ“š Mis Libros</li>
        <li data-tab="subir-libro">ğŸ“ Subir Libro</li>
        <li data-tab="royalties">ğŸ’° Royalties</li>
        <li data-tab="notificaciones">ğŸ”” Notificaciones</li>
        <li data-tab="mi-testimonio">ğŸ’¬ Mi Testimonio</li>
        <li data-tab="configuracion">âš™ï¸ ConfiguraciÃ³n</li>
      </ul>
    </nav>
    <!-- Main Content -->
    <main class="dashboard-main">
      <!-- PestaÃ±a ConfiguraciÃ³n -->
      <section class="tab" id="configuracion">
        <h2>âš™ï¸ ConfiguraciÃ³n de Cuenta</h2>
        <div class="configuracion-grid">
          <!-- Perfil -->
          <div class="card">
            <h3>ğŸ‘¤ Perfil de Escritor</h3>
            <form id="formPerfil">
              <div class="form-group">
                <label for="nombrePerfil">Nombre completo:</label>
                <input type="text" id="nombrePerfil" required>
              </div>
              <div class="form-group">
                <label for="emailPerfil">Email:</label>
                <input type="email" id="emailPerfil" required>
              </div>
              <div class="form-group">
                <label for="biografiaPerfil">BiografÃ­a:</label>
                <textarea id="biografiaPerfil" rows="4"></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Actualizar Perfil</button>
            </form>
          </div>
        </div>
      </section>
      <!-- Fin PestaÃ±a ConfiguraciÃ³n -->
      <!-- PestaÃ±a Inicio -->
      <section class="tab active" id="inicio">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-content">
              <h3 id="totalLibros">0</h3>
              <p>Libros Publicados</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-content">
              <h3 id="totalVentas">0</h3>
              <p>Ventas Totales</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’µ</div>
            <div class="stat-content">
              <h3 id="gananciasTotales">$0</h3>
              <p>Ganancias Acumuladas</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-content">
              <h3 id="gananciaPromedio">$0</h3>
              <p>Promedio por Venta</p>
            </div>
          </div>
        </div>
        <div class="content-grid">
          <div class="card">
            <h3>ğŸ“ˆ Tendencias de Ventas</h3>
            <canvas id="chartTendencias" height="200"></canvas>
          </div>
          <div class="card">
            <h3>ğŸ“š Libros MÃ¡s Vendidos</h3>
            <div id="librosTop" class="libros-top">
              <p>Cargando...</p>
            </div>
          </div>
        </div>
        <div class="card">
          <h3>ğŸ”„ Actividad Reciente</h3>
          <div id="actividadReciente" class="actividad-list">
            <p>Cargando actividad...</p>
          </div>
        </div>
      </section>
      <!-- PestaÃ±a Analytics -->
      <section class="tab" id="analytics">
        <div class="analytics-header">
          <h2>ğŸ“Š Analytics Avanzados</h2>
          <div class="analytics-controls">
            <select id="periodoAnalytics">
              <option value="3">Ãšltimos 3 meses</option>
              <option value="6">Ãšltimos 6 meses</option>
              <option value="12" selected>Ãšltimos 12 meses</option>
            </select>
            <button id="actualizarAnalytics" class="btn btn-primary">ğŸ”„ Actualizar</button>
          </div>
        </div>
        <div class="analytics-grid">
          <div class="card">
            <h3>ğŸ“ˆ Tendencias Mensuales</h3>
            <canvas id="chartTendenciasMensuales" height="250"></canvas>
          </div>
          <div class="card">
            <h3>ğŸ“Š AnÃ¡lisis por CategorÃ­a</h3>
            <canvas id="chartCategorias" height="250"></canvas>
          </div>
          <div class="card">
            <h3>ğŸ’° AnÃ¡lisis de Precios</h3>
            <canvas id="chartPrecios" height="250"></canvas>
          </div>
          <div class="card">
            <h3>ğŸ“… Ventas por DÃ­a de la Semana</h3>
            <canvas id="chartDiasSemana" height="250"></canvas>
          </div>
        </div>
        <div class="card">
          <h3>ğŸ‘¥ Top Afiliados</h3>
          <div id="afiliadosTop" class="afiliados-table">
            <p>Cargando afiliados...</p>
          </div>
        </div>
      </section>
      <!-- PestaÃ±a Mis Libros -->
      <section class="tab" id="libros">
        <div class="libros-header">
          <h2>ğŸ“š Mis Libros</h2>
          <button id="btnNuevoLibro" class="btn btn-primary">ğŸ“ Nuevo Libro</button>
        </div>
        <div class="libros-filters">
          <select id="filtroEstado">
            <option value="">Todos los estados</option>
            <option value="aprobado">Aprobados</option>
            <option value="pendiente">Pendientes</option>
            <option value="rechazado">Rechazados</option>
          </select>
          <select id="filtroCategoria">
            <option value="">Todas las categorÃ­as</option>
            <option value="negocios">Negocios</option>
            <option value="autoayuda">Autoayuda</option>
            <option value="tecnologia">TecnologÃ­a</option>
            <option value="salud">Salud</option>
            <option value="educacion">EducaciÃ³n</option>
          </select>
        </div>
        <div id="librosGrid" class="libros-grid">
          <p>Cargando libros...</p>
        </div>
      </section>
      <!-- PestaÃ±a Subir Libro -->
      <section class="tab" id="subir-libro">
        <div class="card">
          <h2>ğŸ“ Subir Nuevo Libro</h2>
          <form id="formSubirLibro" class="form-libro">
            <div class="form-grid">
              <div class="form-group">
                <label for="tituloLibro">TÃ­tulo del Libro *</label>
                <input type="text" id="tituloLibro" required>
              </div>
              <div class="form-group">
                <label for="categoriaLibro">CategorÃ­a *</label>
                <select id="categoriaLibro" required>
                  <option value="">Seleccionar categorÃ­a</option>
                  <option value="negocios">Negocios</option>
                  <option value="autoayuda">Autoayuda</option>
                  <option value="tecnologia">TecnologÃ­a</option>
                  <option value="salud">Salud</option>
                  <option value="educacion">EducaciÃ³n</option>
                  <option value="ficcion">FicciÃ³n</option>
                  <option value="no-ficcion">No FicciÃ³n</option>
                </select>
              </div>
              <div class="form-group">
                <label for="precioLibro">Precio (COP) *</label>
                <input type="number" id="precioLibro" min="1000" step="1000" required>
              </div>
              <div class="form-group">
                <label for="isbnLibro">ISBN (opcional)</label>
                <input type="text" id="isbnLibro" placeholder="978-0-000000-0-0">
              </div>
            </div>
            <div class="form-group">
              <label for="descripcionLibro">DescripciÃ³n *</label>
              <textarea id="descripcionLibro" rows="4" required placeholder="Describe tu libro..."></textarea>
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label for="archivoPDF">Archivo PDF *</label>
                <input type="file" id="archivoPDF" accept=".pdf" required>
                <small>MÃ¡ximo 10MB</small>
              </div>
              <div class="form-group">
                <label for="portadaLibro">Portada (opcional)</label>
                <input type="file" id="portadaLibro" accept="image/*">
                <small>JPG o PNG, mÃ¡ximo 2MB</small>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">ğŸ“¤ Subir Libro</button>
              <button type="reset" class="btn btn-secondary">ğŸ”„ Limpiar</button>
            </div>
          </form>
        </div>
        <div class="card">
          <h3>ğŸ“‹ Requisitos para Subir un Libro</h3>
          <div class="requisitos-grid">
            <div class="requisito">
              <h4>ğŸ“„ CaracterÃ­sticas TÃ©cnicas</h4>
              <ul>
                <li>Formato: PDF (pronto EPUB, MOBI)</li>
                <li>Peso mÃ¡ximo: 10 MB</li>
                <li>TamaÃ±o ideal: A4 o carta</li>
              </ul>
            </div>
            <div class="requisito">
              <h4>ğŸ–¼ï¸ Requisitos de Portada</h4>
              <ul>
                <li>Formato JPG o PNG</li>
                <li>ResoluciÃ³n mÃ­nima: 800x1200 px</li>
                <li>Peso mÃ¡ximo: 2 MB</li>
              </ul>
            </div>
            <div class="requisito">
              <h4>ğŸ“œ Normatividad en Colombia</h4>
              <ul>
                <li>Registro gratuito en la <strong>DNDA</strong>: <a href="https://www.derechodeautor.gov.co/" target="_blank">derechodeautor.gov.co</a></li>
                <li>ISBN no obligatorio, pero puedes agregarlo</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      <!-- PestaÃ±a Royalties -->
      <section class="tab" id="royalties">
        <div class="royalties-header">
          <h2>ğŸ’° Royalties y Ganancias</h2>
          <div class="royalties-summary">
            <div class="summary-item">
              <span class="label">Total Ganado:</span>
              <span class="value" id="totalGanado">$0</span>
            </div>
            <div class="summary-item">
              <span class="label">Disponible:</span>
              <span class="value" id="disponibleRetiro">$0</span>
            </div>
            <div class="summary-item">
              <span class="label">Retirado:</span>
              <span class="value" id="totalRetirado">$0</span>
            </div>
          </div>
        </div>
        <div class="content-grid">
          <div class="card">
            <h3>ğŸ“ˆ Ganancias por Mes</h3>
            <canvas id="chartGanancias" height="250"></canvas>
          </div>
          <div class="card">
            <h3>ğŸ“Š Royalties por Libro</h3>
            <canvas id="chartRoyaltiesLibros" height="250"></canvas>
          </div>
        </div>
        <div class="card">
          <h3>ğŸ“‹ Historial de Royalties</h3>
          <div id="historialRoyalties" class="royalties-table">
            <p>Cargando historial...</p>
          </div>
        </div>
      </section>
      <!-- PestaÃ±a Notificaciones -->
      <section class="tab" id="notificaciones">
        <div class="notificaciones-header">
          <h2>ğŸ”” Centro de Notificaciones</h2>
          <div class="notificaciones-actions">
            <button id="marcarTodasLeidas" class="btn btn-secondary">Marcar todas como leÃ­das</button>
            <button id="actualizarNotificaciones" class="btn btn-primary">ğŸ”„ Actualizar</button>
          </div>
        </div>
        <div class="notificaciones-filters">
          <label>
            <input type="checkbox" id="filtroNoLeidas" checked> Solo no leÃ­das
          </label>
        </div>
        <div id="notificacionesList" class="notificaciones-list">
          <p>Cargando notificaciones...</p>
        </div>
      </section>
      <!-- PestaÃ±a Mi Testimonio -->
      <section class="tab" id="mi-testimonio">
        <h2>ğŸ’¬ Mi Testimonio</h2>
        <div class="testimonio-container">
          <!-- Eliminar listaTestimoniosAdmin aquÃ­ -->
          <div class="testimonio-info">
            <h3>Comparte tu experiencia como escritor</h3>
            <p>Ayuda a otros escritores compartiendo tu experiencia con Publiery. Tu testimonio puede inspirar a nuevos autores a publicar sus obras en nuestra plataforma.</p>
          </div>
          <form id="formTestimonio" class="testimonio-form">
            <div class="form-group">
              <label for="testimonioTexto">Testimonio:</label>
              <textarea id="testimonioTexto" name="testimonio" rows="6" placeholder="CuÃ©ntanos tu experiencia como escritor en Publiery, cÃ³mo te ha ayudado la plataforma, quÃ© has logrado, etc. (MÃ­nimo 50 caracteres)" required minlength="50" maxlength="500"></textarea>
              <small class="char-count">0 caracteres</small>
            </div>
            <div class="form-group">
              <label for="testimonioImagen">Foto de perfil (opcional):</label>
              <input type="file" id="testimonioImagen" name="imagen" accept="image/*">
              <small>Formatos: JPG, PNG. MÃ¡ximo 2MB.</small>
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="aceptarPublicacion" required>
                Acepto que mi testimonio sea publicado en la pÃ¡gina principal de Publiery
              </label>
            </div>
            <button type="submit" class="btn btn-primary" id="btnEnviarTestimonio">
              Enviar Testimonio
            </button>
          </form>
          <div id="mensajeTestimonio" class="mensaje" style="display: none;"></div>
        </div>
      </section>
    </main>
  </div>
  
  <!-- Modal Editar Libro -->
  <div id="modalEditarLibro" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>âœï¸ Editar Libro</h3>
        <span class="close" onclick="cerrarModalEditar()">&times;</span>
      </div>
      <form id="formEditarLibro" class="form-libro">
        <input type="hidden" id="editLibroId">
        <div class="form-grid">
          <div class="form-group">
            <label for="editTitulo">TÃ­tulo del Libro</label>
            <input type="text" id="editTitulo" disabled>
            <small>El tÃ­tulo no se puede editar</small>
          </div>
          <div class="form-group">
            <label for="editCategoria">CategorÃ­a *</label>
            <select id="editCategoria" required>
              <option value="">Seleccionar categorÃ­a</option>
              <option value="negocios">Negocios</option>
              <option value="autoayuda">Autoayuda</option>
              <option value="tecnologia">TecnologÃ­a</option>
              <option value="salud">Salud</option>
              <option value="educacion">EducaciÃ³n</option>
              <option value="ficcion">FicciÃ³n</option>
              <option value="no-ficcion">No FicciÃ³n</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editPrecio">Precio (COP)</label>
            <input type="number" id="editPrecio" disabled>
            <small>El precio no se puede editar</small>
          </div>
        </div>
        <div class="form-group">
          <label for="editDescripcion">DescripciÃ³n *</label>
          <textarea id="editDescripcion" rows="4" required placeholder="Describe tu libro..."></textarea>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">ğŸ’¾ Guardar Cambios</button>
          <button type="button" onclick="cerrarModalEditar()" class="btn btn-secondary">âŒ Cancelar</button>
        </div>
      </form>
    </div>
  </div>



  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/dashboard-escritor-mejorado.js"></script>
</body>
</html> 